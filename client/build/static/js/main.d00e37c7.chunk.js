(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{24:function(e,t,n){},25:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var r=n(5),o=n.n(r),a=n(18),i=n.n(a),c=(n(24),n(3)),l=(n(25),n(1)),s=n(0),u=n.n(s),d=n(19),m=n.n(d),f=n(4),p=n.n(f),E=(n(48),n(63)),h=n(62),b={SEND_FILE_REQUEST:"SEND_FILE_REQUEST",FILE_SENT_SUCCESS:"FILE_SENT_SUCCESS",SENDING_FILE_FAILED:"SENDING_FILE_FAILED"},S={GET_DIRECTORY_REQUEST:"GET_DIRECTORY_REQUEST",GET_DIRECTORY_SUCCESS:"GET_DIRECTORY_SUCCESS",GET_DIRECTORY_FAILED:"GET_DIRECTORY_FAILED"},g={USER_LOGIN_REQUEST:"USER_LOGIN_REQUEST",USER_LOGIN_PENDING:"USER_LOGIN_PENDING",USER_LOGGED_SUCCESS:"USER_LOGGED_SUCCESS",USER_LOGGED_FAILED:"USER_LOGGED_FAILED"},v={USER_LOG_OUT_REQUEST:"USER_LOG_OUT_REQUEST",USER_LOGGED_OUT_SUCCESS:"USER_LOGGED_OUT_SUCCESS"},O="SET_SYSTEM";"undefined"!==typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!==typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));function x(e,t){try{var n=e()}catch(r){return t(r)}return n&&n.then?n.then(void 0,t):n}function y(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var C=function(e,t,n,r){t=t||"&",n=n||"=";var o={};if("string"!==typeof e||0===e.length)return o;var a=/\+/g;e=e.split(t);var i=1e3;r&&"number"===typeof r.maxKeys&&(i=r.maxKeys);var c=e.length;i>0&&c>i&&(c=i);for(var l=0;l<c;++l){var s,u,d,m,f=e[l].replace(a,"%20"),p=f.indexOf(n);p>=0?(s=f.substr(0,p),u=f.substr(p+1)):(s=f,u=""),d=decodeURIComponent(s),m=decodeURIComponent(u),y(o,d)?Array.isArray(o[d])?o[d].push(m):o[d]=[o[d],m]:o[d]=m}return o},j=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},_=function(e,t,n,r){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"===typeof e?Object.keys(e).map((function(r){var o=encodeURIComponent(j(r))+n;return Array.isArray(e[r])?e[r].map((function(e){return o+encodeURIComponent(j(e))})).join(t):o+encodeURIComponent(j(e[r]))})).join(t):r?encodeURIComponent(j(r))+n+encodeURIComponent(j(e)):""},U=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e,t){t.decode=t.parse=C,t.encode=t.stringify=_})),R="https://api.fairos.io/v0/",D="Fairdrive",w=function(){try{return Promise.resolve(p()({baseURL:R,method:"GET",url:"pod/ls",withCredentials:!0})).then((function(e){return e.data}))}catch(e){return Promise.reject(e)}},F=function(e){return Promise.resolve(x((function(){return Promise.resolve(p()({baseURL:R,method:"POST",url:"pod/new",data:U.stringify({pod:D}),withCredentials:!0})).then((function(e){return!0}))}),(function(e){return e})))},I=function(e){return function(t){switch(t.type){case g.USER_LOGIN_REQUEST:return function(e){try{return Promise.resolve(x((function(){var t=e.username,n=e.password,r={user:t,password:n};return Promise.resolve(p()({baseURL:R,url:"user/login",method:"POST",data:U.stringify(r),withCredentials:!0})).then((function(e){return Promise.resolve(w()).then((function(t){function r(){return Promise.resolve(p()({baseURL:R,method:"POST",url:"pod/open",data:U.stringify({password:n,pod:D}),withCredentials:!0})).then((function(t){return{res:e}}))}var o=function(){if(!t.pod_name.includes(D))return Promise.resolve(F(n)).then((function(){}))}();return o&&o.then?o.then(r):r()}))}))}),(function(e){throw e})))}catch(t){return Promise.reject(t)}}(t.payload).then((function(n){e({type:g.USER_LOGGED_SUCCESS,payload:n}),e({type:O,payload:t.payload})})).catch((function(t){return e({type:g.USER_LOGGED_FAILED,payload:t.response})}));case b.SEND_FILE_REQUEST:return function(e){try{var t=new FormData,n=new File([e.file],e.filename);return t.append("files",n),t.append("pod_dir","/"),t.append("block_size","64Mb"),Promise.resolve(p()({baseURL:R,method:"POST",url:"file/upload",data:t,withCredentials:!0})).then((function(e){return!0}))}catch(r){return Promise.reject(r)}}(t.payload).then((function(t){e({type:b.FILE_SENT_SUCCESS,payload:t})})).catch((function(t){return e({type:b.SENDING_FILE_FAILED,payload:t.response})}));case S.GET_DIRECTORY_REQUEST:return function(e){try{var t=e.directory,n=e.password;return e.podName,Promise.resolve(x((function(){return Promise.resolve(p()({baseURL:R,method:"POST",url:"pod/open",data:U.stringify({password:n,pod:"Fairdrive"}),withCredentials:!0})).then((function(e){var n={dir:""};return n="root"==t?{dir:"/"}:{dir:"/"+t},Promise.resolve(p()({baseURL:R,method:"GET",url:"dir/ls",params:n,withCredentials:!0})).then((function(e){return e.data}))}))}),(function(e){throw e})))}catch(r){return Promise.reject(r)}}(t.payload).then((function(t){e({type:S.GET_DIRECTORY_SUCCESS,payload:t})}));default:e(t)}}},T={token:"",sessionCookie:"",username:"",userData:{},fileUploaded:{},showPasswordUnlock:!1,hasUser:!1,password:null,mnemonic:null,unlocked:!1,entries:null},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.USER_LOGGED_SUCCESS:return Object(l.a)(Object(l.a)({},e),{},{userData:t.payload.res.data,unlocked:!0,password:t.payload.password,username:t.payload.username});case b.FILE_SENT_SUCCESS:return Object(l.a)(Object(l.a)({},e),{},{fileUploaded:t.payload});case O:return Object(l.a)(Object(l.a)({},e),{},{password:t.payload.password,unlocked:!0,username:t.payload.username});case S.GET_DIRECTORY_SUCCESS:return Object(l.a)(Object(l.a)({},e),{},{entries:t.payload.entries,unlocked:!0});default:return e}},L=u.a.createContext({});function N(e){var t=Object(s.useReducer)(P,T),n=Object(c.a)(t,2),r=n[0],o=n[1],a={state:r,actions:function(e,t){return{userLogin:function(e){t({type:g.USER_LOGIN_REQUEST,payload:e})},userLogout:function(){t({type:v.USER_LOG_OUT_REQUEST,payload:""})},sendFile:function(e){t({type:b.SEND_FILE_REQUEST,payload:e})},getDirectory:function(e){t({type:S.GET_DIRECTORY_REQUEST,payload:e})}}}(0,I(o))};return u.a.createElement(L.Provider,{value:a},e.children)}var k={h1:"800 3.4rem var(--font2)",h2:"400 2.4rem var(--font2)",h3:"400 1.8rem var(--font2)",h4:"400 2rem var(--font2)",h5:"400 2.2rem var(--font1)",p1:"500 1.4rem var(--font1)",p2:"400 3.2rem var(--font1)",input:"400 2.8rem var(--font1)",error:"400 1.2rem var(--font1)",highlight:"700 1rem var(--font2)"},G={dark:{name:"dark",textColor:"#16181D",background1:"#88898E",backgroundShade:"#CED0DD",background2:"#EEF0FF",typography:k},light:{name:"light",textColor:"#16181D",background1:"#CED0DD",backgroundShade:"#EEF0FF",background2:"#88898E",typography:k}},A=Object(s.createContext)({});function z(e){var t=Object(s.useState)(G.dark),n=Object(c.a)(t,2),r=n[0],o=n[1],a={theme:r,toggleTheme:function(){"dark"===r.name?o(G.light):o(G.dark)}};return u.a.createElement(A.Provider,{value:a},e.children)}var B,W=Object(E.a)((function(){return Object(h.a)({Main:{minWidth:"100vw",minHeight:"100vh",position:"relative",overflowX:"hidden",overflowY:"auto"}})})),Q=Object(E.a)((function(){return Object(h.a)({fileCard:{backgroundColor:"#88898E",width:"45rem",height:"5rem",display:"flex",flexDirection:"row",justifyItems:"center",alignItems:"center",color:"#EEF0FF",border:"1px solid #CED0DD",boxSizing:"border-box",borderRadius:"8px",cursor:"pointer"},fileName:{marginRight:"1rem",font:function(e){return e.typography.p1}},fileSize:{marginRight:"1rem",color:"#CED0DD"},iconContainer:{width:"15%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},icon:{fill:"#88898E",marginRight:"1rem"}})}));function H(){return(H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Y(e){return Object(s.createElement)("svg",H({width:20,height:20,xmlns:"http://www.w3.org/2000/svg"},e),B||(B=Object(s.createElement)("g",{fill:"none",fillRule:"evenodd"},Object(s.createElement)("path",{d:"M-2-2h24v24H-2z"}),Object(s.createElement)("path",{d:"M9 5h2v2H9V5zm0 4h2v6H9V9zm1-9C4.48 0 0 4.48 0 10s4.48 10 10 10 10-4.48 10-10S15.52 0 10 0zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z",fill:"#dad9d8"}))))}var M=u.a.memo((function(e){var t=Object(s.useContext)(L),n=(t.state,t.actions,Object(s.useContext)(A).theme),r=Q(Object(l.a)(Object(l.a)({},e),n));return u.a.createElement("div",{className:r.fileCard,onClick:function(){try{return Promise.resolve(function(e,t){try{return Promise.resolve(x((function(){return Promise.resolve(p()({baseURL:R,method:"POST",url:"file/download",data:U.stringify({file:e}),responseType:"blob",withCredentials:!0})).then((function(e){return e.data}))}),(function(e){throw e})))}catch(n){return Promise.reject(n)}}("/"+e.file.name,e.file.name).catch((function(e){return console.error(e)}))).then((function(t){var n=e.setFile;return Promise.resolve(t.text()).then((function(t){n.call(e,t)}))}))}catch(t){return Promise.reject(t)}}},u.a.createElement("div",{className:r.iconContainer},u.a.createElement(Y,{className:r.icon})),u.a.createElement("p",{className:r.fileName},e.file.name),u.a.createElement("label",{className:r.fileSize},e.file.size))}));function K(e){var t=W();return u.a.createElement("div",{className:t.Main},u.a.createElement(M,{file:{},setFile:{}}))}function J(){return u.a.createElement("div",{className:"Main"},u.a.createElement(K,null))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var V=Object(E.a)((function(){return Object(h.a)({flexer:{margin:"40px"},title:{margin:"20px",fontFamily:"Work Sans",fontWeight:"bold",fontSize:"34px",letterSpacing:"0",lineHeight:"36px",marginBottom:"20px",color:"#16181D",textAlign:"center"},dialogBox:{backgroundColor:function(e){return e.background1},width:"500px",height:"500px",display:"flex",flexDirection:"column",justifyItems:"center",alignItems:"center"},errormsg:{fontFamily:"Work Sans",fontWeight:"bold",fontSize:"16px",letterSpacing:"0",color:"#f63333",textAlign:"center",margin:"0px 0px 0px 0px",lineHeight:"14px"}})})),X=Object(E.a)((function(){return Object(h.a)({TextField:{width:"75vw",display:"flex",flexDirection:"column",placeItems:"center center",marginBottom:"40px",color:"#16181D"},input:{fontFamily:"Work Sans",fontWeight:"normal",fontSize:"20px",letterSpacing:"0",lineHeight:"19px",width:"205px",textAlign:"left",paddingBottom:"5px",border:"0px",borderBottom:"1px solid #16181D",backgroundColor:"transparent",color:"#16181D",outline:"none"}})}));var $=u.a.memo((function(e){var t=Object(s.useContext)(L),n=(t.state,t.actions,Object(s.useContext)(A).theme),r=X(Object(l.a)(Object(l.a)({},e),n));return u.a.createElement("div",{className:r.TextField},u.a.createElement("input",{className:r.input,type:e.type,placeholder:e.placeholder,onKeyPress:function(t){return function(t){e.onContinue&&13===t.charCode&&e.onContinue()}(t)},onChange:function(t){return function(t){e.setProp(t.target.value),e.setHasError(!1)}(t)}}))})),q=Object(E.a)((function(){return Object(h.a)({BoilerPlate:{backgroundColor:function(e){return e.background1}},button:{fontFamily:"Work Sans",fontWeight:"bold",fontSize:"13px",letterSpacing:"0",lineHeight:"19px",minWidth:"200px",maxWidth:"280px",textAlign:"center",boxSizing:"border-box",padding:"20px 42px",borderRadius:"4px",cursor:"pointer",border:"1px solid #16181D",backgroundColor:function(e){return e.background1},"&:hover":{color:"#EEF0FF"}},buttontext:{fontWeight:"bold",fontSize:"16px",letterSpacing:"0",lineHeight:"19px",fontFamily:"IBM Plex Mono",cursor:"pointer",textTransform:"capitalize",color:"#16181D"}})}));var Z=u.a.memo((function(e){var t=Object(s.useContext)(L),n=t.state,r=(t.actions,Object(s.useContext)(A).theme),o=e.text,a=e.clickFunction,i=q(Object(l.a)(Object(l.a)({},e),r));return Object(s.useEffect)((function(){e.setFiles&&e.setFiles(n.entries)}),[n.entries]),u.a.createElement("div",{className:i.button,onClick:a},u.a.createElement("div",null,u.a.createElement("div",{className:i.buttontext},o)))}));var ee=u.a.memo((function(e){var t=function(){try{return Promise.resolve(o.userLogin({username:f,password:b,podName:"Fairdrive"})).then((function(){}))}catch(e){return Promise.reject(e)}},n=Object(s.useContext)(L),r=n.state,o=n.actions,a=Object(s.useContext)(A).theme,i=V(Object(l.a)(Object(l.a)({},e),a)),d=Object(s.useState)(""),m=Object(c.a)(d,2),f=m[0],p=m[1],E=Object(s.useState)(""),h=Object(c.a)(E,2),b=h[0],S=h[1],g=Object(s.useState)(!1),v=Object(c.a)(g,2),O=v[0],x=v[1];return Object(s.useEffect)((function(){e&&e.setUserPassword(b)}),[r.userData]),u.a.createElement("div",{className:i.dialogBox},u.a.createElement("div",{className:i.title},"Connect with Fairdrive"),u.a.createElement("div",{className:i.flexer}),u.a.createElement($,{placeholder:"Username",type:"text",setHasError:x,setProp:p,onContinue:t}),u.a.createElement($,{placeholder:"Password",type:"password",setHasError:x,setProp:S,onContinue:t}),O?u.a.createElement("div",{className:i.errormsg},"Could not login."):"",u.a.createElement(Z,{text:"Continue",clickFunction:t}))})),te=Object(E.a)((function(){return Object(h.a)({flexer:{margin:"40px"},dialogBox:{backgroundColor:function(e){return e.background1},width:"500px",height:"500px",display:"flex",flexDirection:"column",justifyItems:"center",alignItems:"center"},title:{margin:"20px",fontFamily:"Work Sans",fontWeight:"bold",fontSize:"34px",letterSpacing:"0",lineHeight:"36px",marginBottom:"20px",color:"#16181D",textAlign:"center"},dialogText:{fontFamily:"Work Sans",fontWeight:"normal",fontSize:"20px",letterSpacing:"0",lineHeight:"19px",width:"205px",textAlign:"left",paddingBottom:"5px",border:"0px",borderBottom:"1px solid #16181D",backgroundColor:"transparent",color:"#16181D",outline:"none"}})}));u.a.memo((function(e){var t=Object(s.useContext)(L),n=t.state,r=t.actions,o=Object(s.useContext)(A).theme,a=Object(s.useState)(""),i=Object(c.a)(a,2),d=i[0],m=i[1],f=te(Object(l.a)(Object(l.a)({},e),o));Object(s.useEffect)((function(){e.setUploadRes(n.fileUploaded)}),[n.fileUploaded]);var p=function(){try{var t=x((function(){return Promise.resolve(r.sendFile({file:e.file,filename:d})).then((function(){}))}),(function(e){console.log(e)}));return Promise.resolve(t&&t.then?t.then((function(){})):void 0)}catch(n){return Promise.reject(n)}};return u.a.createElement("div",{className:f.dialogBox},u.a.createElement("div",{className:f.title},"Save file"),u.a.createElement("div",{className:f.flexer}),u.a.createElement("input",{id:"username",className:f.dialogText,type:"text",placeholder:"File name",onKeyPress:function(e){return function(e){13===e.charCode&&p()}(e)},onChange:function(e){return function(e){m(e.target.value)}(e)}}),u.a.createElement("div",{className:f.flexer}),u.a.createElement(Z,{text:"Save file",clickFunction:p}))}));var ne=Object(E.a)((function(){return Object(h.a)({ListFiles:{backgroundColor:function(e){return e.background1},width:"45rem",height:"30rem",display:"flex",flexDirection:"column",justifyItems:"center",alignItems:"center",overflow:"auto"}})}));u.a.memo((function(e){var t=Object(s.useContext)(L),n=(t.state,t.actions,Object(s.useContext)(A).theme),r=ne(Object(l.a)(Object(l.a)({},e),n));return u.a.createElement("div",{className:r.ListFiles},e.files.map((function(t){return u.a.createElement(M,{file:t,setFile:e.setFile})})))}));var re=Object(E.a)((function(){return Object(h.a)({BoilerPlate:{}})}));u.a.memo((function(e){var t=Object(s.useContext)(L),n=(t.state,t.actions),r=Object(s.useContext)(A).theme;return re(Object(l.a)(Object(l.a)({},e),r)),u.a.createElement(Z,{text:"Load Files",setFiles:e.setFiles,clickFunction:function(){try{var t=x((function(){return Promise.resolve(n.getDirectory({directory:"root",password:e.password})).then((function(){}))}),(function(e){console.log(e)}));return Promise.resolve(t&&t.then?t.then((function(){})):void 0)}catch(r){return Promise.reject(r)}}})}));m.a.render(u.a.createElement((function(){return u.a.createElement("div",{className:"App"},u.a.createElement(N,null,u.a.createElement(z,null,u.a.createElement(J,null))))}),null),document.getElementById("root"));var oe=function(e){return u.a.createElement(N,null,u.a.createElement(z,null,u.a.createElement(ee,{setUserPassword:e.setUserPassword,podName:e.podName})))};"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}));var ae=n(6);var ie=function(){var e=Object(r.useState)(null),t=Object(c.a)(e,2),n=(t[0],t[1]);return Object(ae.jsx)("div",{className:"App",children:Object(ae.jsx)(oe,{setUserPassword:n})})},ce=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,64)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),o(e),a(e),i(e)}))};i.a.render(Object(ae.jsx)(o.a.StrictMode,{children:Object(ae.jsx)(ie,{})}),document.getElementById("root")),ce()}},[[54,1,2]]]);
//# sourceMappingURL=main.d00e37c7.chunk.js.map